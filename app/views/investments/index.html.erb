<div class="max-w-7xl mx-auto">
  <div class="text-center mb-8">
    <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-2">REIT Investment Tracker</h1>
    <p class="text-lg text-gray-600">Road to $230k</p>
    <div class="mt-4">
      <%= link_to "Logout", logout_path, method: :delete, 
          class: "text-sm text-gray-500 hover:text-gray-700" %>
    </div>
  </div>
  
  <!-- Summary Cards -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8">
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Current Balance</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800">$<%= number_with_delimiter(sprintf('%.2f', @summary[:current_balance])) %></p>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Remaining to Goal</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800">$<%= number_with_delimiter(sprintf('%.2f', @summary[:remaining])) %></p>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Progress</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800"><%= sprintf('%.2f', @summary[:progress]) %>%</p>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Est. Monthly Dividend</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800">$<%= number_with_delimiter(sprintf('%.2f', @summary[:monthly_dividend])) %></p>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Months to $2k/mo</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800 mb-2"><%= @summary[:months_to_target] %></p>
      <%= form_with url: update_contribution_path, local: true, class: "mt-2" do |f| %>
        <%= f.number_field :amount, value: @summary[:monthly_contribution], 
            class: "w-full px-2 py-1 border border-green-300 rounded-md text-center text-sm bg-white focus:ring-2 focus:ring-green-500 focus:border-green-500",
            placeholder: "Monthly contribution" %>
      <% end %>
    </div>
    
    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 sm:p-6 rounded-lg border border-green-200 hover:shadow-md hover:border-green-300 transition-all duration-200">
      <h3 class="text-sm font-medium text-green-700 mb-1">Years to $2k</h3>
      <p class="text-xl sm:text-2xl font-bold text-green-800"><%= @summary[:years_to_target] %></p>
    </div>
  </div>
  
  <!-- Investment Table -->
  <div class="bg-white rounded-lg shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead>
          <tr class="bg-gray-100 border-b border-gray-200">
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Month #</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Date</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Target</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Actual</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Dividend</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Total Invested</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Balance</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Est. Monthly Dividend</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Remaining</th>
            <th class="px-3 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">Notes</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          <% @investments.each_with_index do |inv, index| %>
            <% row_class = "hover:bg-gray-50" %>
            <% row_class += " bg-blue-50" if inv.month > 0 && inv.month % 3 == 0 %>
            <tr class="<%= row_class %>">
              <td class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= inv.month %></td>
              <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700"><%= inv.date %></td>
              <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700">
                <% if inv.month == 0 %>
                  <span class="text-gray-400">-</span>
                <% else %>
                  $<%= number_with_delimiter(sprintf('%.2f', inv.target)) %>
                <% end %>
              </td>
              
              <% if inv.month > 0 %>
                <%= form_with model: inv, local: true, html: { style: "display: contents;" } do |f| %>
                  <td class="px-3 py-4 whitespace-nowrap text-sm bg-yellow-50">
                    <%= f.number_field :actual, step: 0.01, 
                        value: inv.actual,
                        class: "w-full px-2 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500",
                        onchange: "this.form.submit()" %>
                  </td>
                  <td class="px-3 py-4 whitespace-nowrap text-sm bg-yellow-50">
                    <%= f.number_field :dividend, step: 0.01,
                        value: inv.dividend,
                        class: "w-full px-2 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500",
                        onchange: "this.form.submit()" %>
                  </td>
                <% end %>
              <% else %>
                <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
                <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-400">-</td>
              <% end %>
              
              <td class="px-3 py-4 whitespace-nowrap text-sm font-medium text-gray-900">$<%= number_with_delimiter(sprintf('%.2f', inv.total_invested)) %></td>
              <td class="px-3 py-4 whitespace-nowrap text-sm font-medium text-green-600">$<%= number_with_delimiter(sprintf('%.2f', inv.balance)) %></td>
              <td class="px-3 py-4 whitespace-nowrap text-sm text-green-600">$<%= number_with_delimiter(sprintf('%.2f', inv.monthly_dividend)) %></td>
              <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700">$<%= number_with_delimiter(sprintf('%.2f', inv.remaining)) %></td>
              
              <% if inv.month > 0 %>
                <%= form_with model: inv, local: true, html: { style: "display: contents;" } do |f| %>
                  <td class="px-3 py-4 bg-yellow-50">
                    <%= f.text_field :notes, 
                        value: inv.notes,
                        class: "w-full px-2 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-green-500 focus:border-green-500",
                        onchange: "this.form.submit()",
                        placeholder: "Add notes..." %>
                  </td>
                <% end %>
              <% else %>
                <td class="px-3 py-4 whitespace-nowrap text-sm text-gray-700"><%= inv.notes %></td>
              <% end %>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>